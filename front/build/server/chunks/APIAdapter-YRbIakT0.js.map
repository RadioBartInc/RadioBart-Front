{"version":3,"file":"APIAdapter-YRbIakT0.js","sources":["../../../.svelte-kit/adapter-node/chunks/APIAdapter.js"],"sourcesContent":["import axios from \"axios\";\nconst BACKEND_CONFIG = {\n  IP: \"127.0.0.1\",\n  PORT: 3e3\n};\nconst BASE_URL = `http://${BACKEND_CONFIG.IP}:${BACKEND_CONFIG.PORT}/api`;\nasync function fetchArtistById(artistId) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${artistId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching artist with ID: ${artistId}`, error);\n    throw error;\n  }\n}\nasync function fetchAlbumAvgRating(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/albums/avgRating/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching average rating:\", error);\n    throw error;\n  }\n}\nasync function fetchAlbumsPage(page, limit, pattern) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/albums/paginated/a`,\n      {\n        params: {\n          limit,\n          page,\n          searchString: pattern\n        }\n      }\n    );\n    console.log(response.request);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching album page:\", error);\n    throw error;\n  }\n}\nasync function fetchArtistsPage(page, limit, pattern) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/artists/paginated/a`,\n      {\n        params: {\n          limit,\n          page,\n          searchString: pattern\n        }\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching artist page:\", error);\n    throw error;\n  }\n}\nclass Album {\n  constructor(id, title, artist, fecha, genre, reviews, cover) {\n    this.id = id;\n    this.title = title;\n    this.artist = artist;\n    this.fecha = fecha;\n    this.genre = genre;\n    this.reviews = reviews;\n    this.cover = cover;\n  }\n  toAPIFormat() {\n    return {\n      title: this.title,\n      artist: this.artist,\n      fecha: this.fecha,\n      genre: this.genre,\n      reviews: this.reviews,\n      cover: this.cover\n    };\n  }\n}\nclass Artista {\n  constructor(id, name, albums, foto) {\n    this.id = id;\n    this.name = name;\n    this.albums = albums;\n    this.foto = foto;\n  }\n  toAPIFormat() {\n    return {\n      name: this.name,\n      albums: this.albums,\n      picture: this.foto\n    };\n  }\n}\nasync function getArtistById(id) {\n  const rawArtist = await fetchArtistById(id);\n  return rawArtist ? new Artista(rawArtist._id, rawArtist.name, rawArtist.albums, rawArtist.picture) : null;\n}\nasync function getAlbumAvgRating(id) {\n  const data = await fetchAlbumAvgRating(id);\n  return Math.floor(data.averageRating);\n}\nasync function getAlbumsPage(page, limit, pattern) {\n  let response = await fetchAlbumsPage(page, limit, pattern);\n  return [response.albums.map((album) => new Album(album._id, album.title, album.artist, new Date(album.fecha), album.genre, album.reviews, album.cover)), response.total];\n}\nasync function getArtistsPage(page, limit, pattern) {\n  let response = await fetchArtistsPage(page, limit, pattern);\n  return [response.artists.map((artist) => new Artista(artist._id, artist.name, artist.albums, artist.picture)), response.total];\n}\nexport {\n  getArtistById as a,\n  getAlbumAvgRating as b,\n  getArtistsPage as c,\n  getAlbumsPage as g\n};\n"],"names":[],"mappings":"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"}