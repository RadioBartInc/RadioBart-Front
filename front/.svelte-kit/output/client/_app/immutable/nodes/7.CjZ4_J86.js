import{e as Y}from"../chunks/index.CzR0xuCU.js";import{s as V,n as R,r as Z,o as $,h as G}from"../chunks/scheduler.Cz3TSd7V.js";import{S as K,i as Q,e as v,s as C,c as _,d as W,A as P,h as A,g as M,o as r,j as X,k as u,B as w,z as O,b as ee,f as te,l as se,m as le,n as ae,p as re,t as ne,a as oe,r as ue}from"../chunks/index.DKOtY3uX.js";import{U as ie,m as ce,n as fe}from"../chunks/APIAdapter.DEoGsArP.js";function pe({params:l}){if(l.id)return{id:l.id};Y(404,"Not found")}const Ae=Object.freeze(Object.defineProperty({__proto__:null,load:pe},Symbol.toStringTag,{value:"Module"}));function J(l){let e,t,a;return{c(){e=v("p"),t=ee(l[4]),this.h()},l(n){e=_(n,"P",{class:!0});var o=W(e);t=te(o,l[4]),o.forEach(M),this.h()},h(){r(e,"class",a=G(l[5])+" svelte-1v6ys91")},m(n,o){X(n,e,o),u(e,t)},p(n,o){o&16&&se(t,n[4]),o&32&&a!==(a=G(n[5])+" svelte-1v6ys91")&&r(e,"class",a)},d(n){n&&M(e)}}}function de(l){let e,t,a="Agregar Álbum",n,o,E="Título:",L,p,x,m,U="Género:",h,d,I,b,k="Fecha de Lanzamiento:",S,f,N,g,z="URL de la Portada:",j,y,q,B,T,F='<input class="submit svelte-1v6ys91" type="submit" value="Agregar Álbum"/>',D,H,i=l[4]&&J(l);return{c(){e=v("form"),t=v("h2"),t.textContent=a,n=C(),o=v("label"),o.textContent=E,L=C(),p=v("input"),x=C(),m=v("label"),m.textContent=U,h=C(),d=v("input"),I=C(),b=v("label"),b.textContent=k,S=C(),f=v("input"),N=C(),g=v("label"),g.textContent=z,j=C(),y=v("input"),q=C(),i&&i.c(),B=C(),T=v("div"),T.innerHTML=F,this.h()},l(c){e=_(c,"FORM",{class:!0});var s=W(e);t=_(s,"H2",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-rbva3g"&&(t.textContent=a),n=A(s),o=_(s,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(o)!=="svelte-m2l0d9"&&(o.textContent=E),L=A(s),p=_(s,"INPUT",{type:!0,id:!0,class:!0}),x=A(s),m=_(s,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(m)!=="svelte-1pr5u87"&&(m.textContent=U),h=A(s),d=_(s,"INPUT",{type:!0,id:!0,class:!0}),I=A(s),b=_(s,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(b)!=="svelte-6ux9ya"&&(b.textContent=k),S=A(s),f=_(s,"INPUT",{type:!0,id:!0,class:!0}),N=A(s),g=_(s,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(g)!=="svelte-a0513r"&&(g.textContent=z),j=A(s),y=_(s,"INPUT",{type:!0,id:!0,class:!0}),q=A(s),i&&i.l(s),B=A(s),T=_(s,"DIV",{class:!0,"data-svelte-h":!0}),P(T)!=="svelte-wv38xn"&&(T.innerHTML=F),s.forEach(M),this.h()},h(){r(t,"class","svelte-1v6ys91"),r(o,"for","title"),r(o,"class","svelte-1v6ys91"),r(p,"type","text"),r(p,"id","title"),r(p,"class","text-input svelte-1v6ys91"),p.required=!0,r(m,"for","genre"),r(m,"class","svelte-1v6ys91"),r(d,"type","text"),r(d,"id","genre"),r(d,"class","text-input svelte-1v6ys91"),d.required=!0,r(b,"for","release-date"),r(b,"class","svelte-1v6ys91"),r(f,"type","date"),r(f,"id","release-date"),r(f,"class","text-input svelte-1v6ys91"),f.required=!0,r(g,"for","cover-url"),r(g,"class","svelte-1v6ys91"),r(y,"type","text"),r(y,"id","cover-url"),r(y,"class","text-input svelte-1v6ys91"),r(T,"class","wrapper svelte-1v6ys91"),r(e,"class","svelte-1v6ys91")},m(c,s){X(c,e,s),u(e,t),u(e,n),u(e,o),u(e,L),u(e,p),w(p,l[0]),u(e,x),u(e,m),u(e,h),u(e,d),w(d,l[1]),u(e,I),u(e,b),u(e,S),u(e,f),w(f,l[2]),u(e,N),u(e,g),u(e,j),u(e,y),w(y,l[3]),u(e,q),i&&i.m(e,null),u(e,B),u(e,T),D||(H=[O(p,"input",l[8]),O(d,"input",l[9]),O(f,"input",l[10]),O(y,"input",l[11]),O(e,"submit",l[6])],D=!0)},p(c,[s]){s&1&&p.value!==c[0]&&w(p,c[0]),s&2&&d.value!==c[1]&&w(d,c[1]),s&4&&w(f,c[2]),s&8&&y.value!==c[3]&&w(y,c[3]),c[4]?i?i.p(c,s):(i=J(c),i.c(),i.m(e,B)):i&&(i.d(1),i=null)},i:R,o:R,d(c){c&&M(e),i&&i.d(),D=!1,Z(H)}}}function me(l,e,t){let{artist:a=""}=e,n="",o="",E="",L="",p=[],x="",m="red",U,h;$(()=>{U=localStorage.getItem("token"),h=ie.fromObject(JSON.parse(localStorage.getItem("user")||""))});async function d(f){f.preventDefault();const N=new fe("",n,a,new Date(E),o,p,L||"https://via.placeholder.com/150");try{await ce(N,U??"",(h==null?void 0:h.admin_secret)??"",(h==null?void 0:h.id)??"")?(t(5,m="green"),t(4,x="Álbum agregado correctamente"),setTimeout(()=>{window.location.href="/"},1e3)):(t(5,m="red"),t(4,x="Error interno del servidor, intenta de nuevo"))}catch(g){console.error("Error al agregar el álbum:",g),t(4,x="Ocurrió un error durante el proceso")}}function I(){n=this.value,t(0,n)}function b(){o=this.value,t(1,o)}function k(){E=this.value,t(2,E)}function S(){L=this.value,t(3,L)}return l.$$set=f=>{"artist"in f&&t(7,a=f.artist)},[n,o,E,L,x,m,d,a,I,b,k,S]}class ve extends K{constructor(e){super(),Q(this,e,me,de,V,{artist:7})}}function _e(l){let e,t;return e=new ve({props:{artist:l[0].id}}),{c(){le(e.$$.fragment)},l(a){ae(e.$$.fragment,a)},m(a,n){re(e,a,n),t=!0},p(a,[n]){const o={};n&1&&(o.artist=a[0].id),e.$set(o)},i(a){t||(ne(e.$$.fragment,a),t=!0)},o(a){oe(e.$$.fragment,a),t=!1},d(a){ue(e,a)}}}function he(l,e,t){let{data:a}=e;return l.$$set=n=>{"data"in n&&t(0,a=n.data)},[a]}class Le extends K{constructor(e){super(),Q(this,e,he,_e,V,{data:0})}}export{Le as component,Ae as universal};
