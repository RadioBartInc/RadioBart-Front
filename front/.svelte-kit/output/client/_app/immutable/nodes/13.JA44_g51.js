import{e as Fe}from"../chunks/index.CzR0xuCU.js";import{s as Ce,n as pe,o as ze,d as ue}from"../chunks/scheduler.Cz3TSd7V.js";import{S as Ae,i as Se,e as c,c as u,d,g as o,o as i,j as K,s as q,b as F,h as k,f as y,A as ve,k as l,l as J,u as ye,m as Ie,n as Ee,p as we,t as qe,a as ke,r as $e}from"../chunks/index.DKOtY3uX.js";import{e as He,N as Je}from"../chunks/Navbar.CYHUjA86.js";import{b as Ke,x as Qe,g as Xe,c as Ye,d as Ze}from"../chunks/APIAdapter.CWbTadu6.js";import{R as _e}from"../chunks/limits.C1Ngrwk2.js";import{g as Be}from"../chunks/misc.B4lJbiPP.js";function xe({params:r}){if(r.id)return{id:r.id};Fe(404,"Not found")}const mt=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"}));function je(r){let a,e,t,s,v,n=r[0].name+"",f,b,p,$,w,R="Reviews",h,g,C=r[1].reviewCount+"",A,x,S,D,H="Avg. Rating",te,B,T=r[1].averageRating+"",j,Y,M,P,G="Likes Totales",se,U,Q=r[1].totalLikes+"",V;return{c(){a=c("div"),e=c("img"),s=q(),v=c("h1"),f=F(n),b=q(),p=c("div"),$=c("div"),w=c("p"),w.textContent=R,h=q(),g=c("p"),A=F(C),x=q(),S=c("div"),D=c("p"),D.textContent=H,te=q(),B=c("p"),j=F(T),Y=q(),M=c("div"),P=c("p"),P.textContent=G,se=q(),U=c("p"),V=F(Q),this.h()},l(_){a=u(_,"DIV",{class:!0});var E=d(a);e=u(E,"IMG",{src:!0,alt:!0,class:!0}),E.forEach(o),s=k(_),v=u(_,"H1",{class:!0});var Z=d(v);f=y(Z,n),Z.forEach(o),b=k(_),p=u(_,"DIV",{class:!0});var N=d(p);$=u(N,"DIV",{class:!0});var X=d($);w=u(X,"P",{"data-svelte-h":!0}),ve(w)!=="svelte-m3uku9"&&(w.textContent=R),h=k(X),g=u(X,"P",{class:!0});var ae=d(g);A=y(ae,C),ae.forEach(o),X.forEach(o),x=k(N),S=u(N,"DIV",{class:!0});var L=d(S);D=u(L,"P",{"data-svelte-h":!0}),ve(D)!=="svelte-5bk49r"&&(D.textContent=H),te=k(L),B=u(L,"P",{class:!0});var W=d(B);j=y(W,T),W.forEach(o),L.forEach(o),Y=k(N),M=u(N,"DIV",{class:!0});var z=d(M);P=u(z,"P",{"data-svelte-h":!0}),ve(P)!=="svelte-1otydcm"&&(P.textContent=G),se=k(z),U=u(z,"P",{class:!0});var ee=d(U);V=y(ee,Q),ee.forEach(o),z.forEach(o),N.forEach(o),this.h()},h(){ue(e.src,t=r[0].profile_picture||"https://via.placeholder.com/50")||i(e,"src",t),i(e,"alt","Avatar"),i(e,"class","avatar svelte-79ke6r"),i(a,"class","avatar-wrapper svelte-79ke6r"),i(v,"class","nombre svelte-79ke6r"),i(g,"class","cant-reviews svelte-79ke6r"),i($,"class","data-block svelte-79ke6r"),i(B,"class","promedio-rating svelte-79ke6r"),i(S,"class","data-block svelte-79ke6r"),i(U,"class","likes-totales svelte-79ke6r"),i(M,"class","data-block svelte-79ke6r"),i(p,"class","data svelte-79ke6r")},m(_,E){K(_,a,E),l(a,e),K(_,s,E),K(_,v,E),l(v,f),K(_,b,E),K(_,p,E),l(p,$),l($,w),l($,h),l($,g),l(g,A),l(p,x),l(p,S),l(S,D),l(S,te),l(S,B),l(B,j),l(p,Y),l(p,M),l(M,P),l(M,se),l(M,U),l(U,V)},p(_,E){E&1&&!ue(e.src,t=_[0].profile_picture||"https://via.placeholder.com/50")&&i(e,"src",t),E&1&&n!==(n=_[0].name+"")&&J(f,n),E&2&&C!==(C=_[1].reviewCount+"")&&J(A,C),E&2&&T!==(T=_[1].averageRating+"")&&J(j,T),E&2&&Q!==(Q=_[1].totalLikes+"")&&J(V,Q)},d(_){_&&(o(a),o(s),o(v),o(b),o(p))}}}function et(r){let a,e=r[0]&&r[1]&&je(r);return{c(){a=c("section"),e&&e.c(),this.h()},l(t){a=u(t,"SECTION",{class:!0});var s=d(a);e&&e.l(s),s.forEach(o),this.h()},h(){i(a,"class","svelte-79ke6r")},m(t,s){K(t,a,s),e&&e.m(a,null)},p(t,[s]){t[0]&&t[1]?e?e.p(t,s):(e=je(t),e.c(),e.m(a,null)):e&&(e.d(1),e=null)},i:pe,o:pe,d(t){t&&o(a),e&&e.d()}}}function tt(r,a,e){let{id:t}=a,s=null,v=null;return ze(async()=>{try{e(0,s=await Ke(t)),s?e(1,v=await Qe(s.id)):console.error("User not found")}catch(n){console.error("Error fetching user data:",n)}}),r.$$set=n=>{"id"in n&&e(2,t=n.id)},[s,v,t]}class st extends Ae{constructor(a){super(),Se(this,a,tt,et,Ce,{id:2})}}function Ge(r,a,e){const t=r.slice();return t[4]=a[e],t}function We(r){var De,Pe;let a,e,t,s,v,n,f,b,p,$=r[4].ratingScore+"",w,R,h,g,C=new Date(r[4].fecha).toLocaleDateString("es-ES")+"",A,x,S,D,H,te,B,T,j=r[4].likes+"",Y,M,P,G,se='<img src="https://via.placeholder.com/50" alt="More Review" class="svelte-1qs2q4x"/>',U,Q,V,_,E,Z=(((De=r[2][r[4].albumId])==null?void 0:De.name)||"Unknown Artist")+"",N,X,ae,L,W,z=(((Pe=r[1][r[4].albumId])==null?void 0:Pe.title)||"Unknown Album")+"",ee,fe,ge,le,ie=(r[4].content.length>_e?r[4].content.slice(0,_e)+"...":r[4].content)+"",de,be;return{c(){a=c("div"),e=c("div"),t=c("a"),s=c("img"),f=q(),b=c("div"),p=c("p"),w=F($),h=q(),g=c("p"),A=F(C),x=q(),S=c("div"),D=c("div"),H=c("img"),B=q(),T=c("p"),Y=F(j),M=q(),P=c("a"),G=c("button"),G.innerHTML=se,Q=q(),V=c("div"),_=c("h3"),E=c("a"),N=F(Z),ae=q(),L=c("h3"),W=c("a"),ee=F(z),ge=q(),le=c("p"),de=F(ie),be=q(),this.h()},l(m){a=u(m,"DIV",{class:!0});var I=d(a);e=u(I,"DIV",{class:!0});var O=d(e);t=u(O,"A",{href:!0});var ne=d(t);s=u(ne,"IMG",{src:!0,alt:!0,class:!0}),ne.forEach(o),f=k(O),b=u(O,"DIV",{class:!0});var oe=d(b);p=u(oe,"P",{class:!0});var ce=d(p);w=y(ce,$),ce.forEach(o),oe.forEach(o),h=k(O),g=u(O,"P",{class:!0});var Ve=d(g);A=y(Ve,C),Ve.forEach(o),x=k(O),S=u(O,"DIV",{class:!0});var he=d(S);D=u(he,"DIV",{class:!0});var me=d(D);H=u(me,"IMG",{src:!0,alt:!0,class:!0}),B=k(me),T=u(me,"P",{class:!0});var Re=d(T);Y=y(Re,j),Re.forEach(o),me.forEach(o),M=k(he),P=u(he,"A",{class:!0,href:!0});var Te=d(P);G=u(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(G)!=="svelte-106dnde"&&(G.innerHTML=se),Te.forEach(o),he.forEach(o),O.forEach(o),Q=k(I),V=u(I,"DIV",{class:!0});var re=d(V);_=u(re,"H3",{class:!0});var Me=d(_);E=u(Me,"A",{href:!0});var Ue=d(E);N=y(Ue,Z),Ue.forEach(o),Me.forEach(o),ae=k(re),L=u(re,"H3",{class:!0});var Ne=d(L);W=u(Ne,"A",{href:!0});var Le=d(W);ee=y(Le,z),Le.forEach(o),Ne.forEach(o),ge=k(re),le=u(re,"P",{class:!0});var Oe=d(le);de=y(Oe,ie),Oe.forEach(o),re.forEach(o),be=k(I),I.forEach(o),this.h()},h(){var m,I;ue(s.src,v=((m=r[1][r[4].albumId])==null?void 0:m.cover)||"https://via.placeholder.com/150")||i(s,"src",v),i(s,"alt","Album Cover"),i(s,"class","portada hover-image"),i(t,"href",n=`/album/${r[4].albumId}`),i(p,"class",R="rating "+Be(r[4].ratingScore)+" svelte-1qs2q4x"),i(b,"class","rating-wrapper svelte-1qs2q4x"),i(g,"class","fecha svelte-1qs2q4x"),ue(H.src,te="https://via.placeholder.com/50")||i(H,"src",te),i(H,"alt","heart"),i(H,"class","heart svelte-1qs2q4x"),i(T,"class","likes-no svelte-1qs2q4x"),i(D,"class","likes svelte-1qs2q4x"),i(G,"class","svelte-1qs2q4x"),i(P,"class","more_review svelte-1qs2q4x"),i(P,"href",U=`/review/${r[4].id}`),i(S,"class","buttons_review svelte-1qs2q4x"),i(e,"class","info svelte-1qs2q4x"),i(E,"href",X=`/artista/${(I=r[2][r[4].albumId])==null?void 0:I.id}`),i(_,"class","artista"),i(W,"href",fe=`/album/${r[4].albumId}`),i(L,"class","album"),i(le,"class","review-texto svelte-1qs2q4x"),i(V,"class","ti-tex svelte-1qs2q4x"),i(a,"class","review svelte-1qs2q4x")},m(m,I){K(m,a,I),l(a,e),l(e,t),l(t,s),l(e,f),l(e,b),l(b,p),l(p,w),l(e,h),l(e,g),l(g,A),l(e,x),l(e,S),l(S,D),l(D,H),l(D,B),l(D,T),l(T,Y),l(S,M),l(S,P),l(P,G),l(a,Q),l(a,V),l(V,_),l(_,E),l(E,N),l(V,ae),l(V,L),l(L,W),l(W,ee),l(V,ge),l(V,le),l(le,de),l(a,be)},p(m,I){var O,ne,oe,ce;I&3&&!ue(s.src,v=((O=m[1][m[4].albumId])==null?void 0:O.cover)||"https://via.placeholder.com/150")&&i(s,"src",v),I&1&&n!==(n=`/album/${m[4].albumId}`)&&i(t,"href",n),I&1&&$!==($=m[4].ratingScore+"")&&J(w,$),I&1&&R!==(R="rating "+Be(m[4].ratingScore)+" svelte-1qs2q4x")&&i(p,"class",R),I&1&&C!==(C=new Date(m[4].fecha).toLocaleDateString("es-ES")+"")&&J(A,C),I&1&&j!==(j=m[4].likes+"")&&J(Y,j),I&1&&U!==(U=`/review/${m[4].id}`)&&i(P,"href",U),I&5&&Z!==(Z=(((ne=m[2][m[4].albumId])==null?void 0:ne.name)||"Unknown Artist")+"")&&J(N,Z),I&5&&X!==(X=`/artista/${(oe=m[2][m[4].albumId])==null?void 0:oe.id}`)&&i(E,"href",X),I&3&&z!==(z=(((ce=m[1][m[4].albumId])==null?void 0:ce.title)||"Unknown Album")+"")&&J(ee,z),I&1&&fe!==(fe=`/album/${m[4].albumId}`)&&i(W,"href",fe),I&1&&ie!==(ie=(m[4].content.length>_e?m[4].content.slice(0,_e)+"...":m[4].content)+"")&&J(de,ie)},d(m){m&&o(a)}}}function at(r){let a,e=He(r[0]),t=[];for(let s=0;s<e.length;s+=1)t[s]=We(Ge(r,e,s));return{c(){a=c("section");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){a=u(s,"SECTION",{class:!0});var v=d(a);for(let n=0;n<t.length;n+=1)t[n].l(v);v.forEach(o),this.h()},h(){i(a,"class","svelte-1qs2q4x")},m(s,v){K(s,a,v);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(a,null)},p(s,[v]){if(v&7){e=He(s[0]);let n;for(n=0;n<e.length;n+=1){const f=Ge(s,e,n);t[n]?t[n].p(f,v):(t[n]=We(f),t[n].c(),t[n].m(a,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},i:pe,o:pe,d(s){s&&o(a),ye(t,s)}}}function lt(r,a,e){let{id:t}=a,s=[],v={},n={};return ze(async()=>{try{e(0,s=(await Xe()).filter(f=>f.userId===t));for(const f of s)if(!v[f.albumId]){const b=await Ye(f.albumId);if(b){e(1,v[f.albumId]=b,v);const p=await Ze(b.artist);p&&e(2,n[f.albumId]=p,n)}}}catch(f){console.error("Failed to fetch user reviews:",f)}}),r.$$set=f=>{"id"in f&&e(3,t=f.id)},[s,v,n,t]}class rt extends Ae{constructor(a){super(),Se(this,a,lt,at,Ce,{id:3})}}function it(r){let a,e,t,s,v,n,f,b,p="Reviews",$,w,R;return a=new Je({}),v=new st({props:{id:r[0].id}}),w=new rt({props:{id:r[0].id}}),{c(){Ie(a.$$.fragment),e=q(),t=c("main"),s=c("section"),Ie(v.$$.fragment),n=q(),f=c("section"),b=c("h2"),b.textContent=p,$=q(),Ie(w.$$.fragment),this.h()},l(h){Ee(a.$$.fragment,h),e=k(h),t=u(h,"MAIN",{});var g=d(t);s=u(g,"SECTION",{class:!0});var C=d(s);Ee(v.$$.fragment,C),C.forEach(o),n=k(g),f=u(g,"SECTION",{class:!0});var A=d(f);b=u(A,"H2",{class:!0,"data-svelte-h":!0}),ve(b)!=="svelte-1s1oglv"&&(b.textContent=p),$=k(A),Ee(w.$$.fragment,A),A.forEach(o),g.forEach(o),this.h()},h(){i(s,"class","section-body"),i(b,"class","section-title titulo-rev svelte-1qg0r8c"),i(f,"class","section-body")},m(h,g){we(a,h,g),K(h,e,g),K(h,t,g),l(t,s),we(v,s,null),l(t,n),l(t,f),l(f,b),l(f,$),we(w,f,null),R=!0},p(h,[g]){const C={};g&1&&(C.id=h[0].id),v.$set(C);const A={};g&1&&(A.id=h[0].id),w.$set(A)},i(h){R||(qe(a.$$.fragment,h),qe(v.$$.fragment,h),qe(w.$$.fragment,h),R=!0)},o(h){ke(a.$$.fragment,h),ke(v.$$.fragment,h),ke(w.$$.fragment,h),R=!1},d(h){h&&(o(e),o(t)),$e(a,h),$e(v),$e(w)}}}function nt(r,a,e){let{data:t}=a;return r.$$set=s=>{"data"in s&&e(0,t=s.data)},[t]}class _t extends Ae{constructor(a){super(),Se(this,a,nt,it,Ce,{data:0})}}export{_t as component,mt as universal};
