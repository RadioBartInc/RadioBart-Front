import{e as Fe}from"../chunks/index.CzR0xuCU.js";import{s as Ae,n as pe,o as ze,d as ue}from"../chunks/scheduler.Cz3TSd7V.js";import{S as Se,i as De,e as c,c as u,d,g as o,o as i,j as K,s as k,b as F,h as $,f as y,A as ve,k as l,l as J,u as ye,m as Ie,n as Ee,p as we,t as ke,a as $e,r as Ce}from"../chunks/index.DKOtY3uX.js";import{e as Be,N as Je}from"../chunks/Navbar.DGiOEIBM.js";import{b as Ke,D as Qe,g as Xe,c as Ye,d as Ze}from"../chunks/APIAdapter.DEoGsArP.js";import{R as _e}from"../chunks/limits.C1Ngrwk2.js";import{g as je}from"../chunks/misc.B4lJbiPP.js";function xe({params:r}){if(r.id)return{id:r.id};Fe(404,"Not found")}const mt=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"}));function Ge(r){let a,e,t,s,v,n=r[0].name+"",f,b,p,C,w,T="Reviews",h,g,A=r[1].reviewCount+"",S,x,D,P,B="Avg. Rating",te,j,M=r[1].averageRating+"",G,Y,U,V,q="Likes Totales",se,N,Q=r[1].totalLikes+"",R;return{c(){a=c("div"),e=c("img"),s=k(),v=c("h1"),f=F(n),b=k(),p=c("div"),C=c("div"),w=c("p"),w.textContent=T,h=k(),g=c("p"),S=F(A),x=k(),D=c("div"),P=c("p"),P.textContent=B,te=k(),j=c("p"),G=F(M),Y=k(),U=c("div"),V=c("p"),V.textContent=q,se=k(),N=c("p"),R=F(Q),this.h()},l(_){a=u(_,"DIV",{class:!0});var E=d(a);e=u(E,"IMG",{src:!0,alt:!0,class:!0}),E.forEach(o),s=$(_),v=u(_,"H1",{class:!0});var Z=d(v);f=y(Z,n),Z.forEach(o),b=$(_),p=u(_,"DIV",{class:!0});var L=d(p);C=u(L,"DIV",{class:!0});var X=d(C);w=u(X,"P",{"data-svelte-h":!0}),ve(w)!=="svelte-m3uku9"&&(w.textContent=T),h=$(X),g=u(X,"P",{class:!0});var ae=d(g);S=y(ae,A),ae.forEach(o),X.forEach(o),x=$(L),D=u(L,"DIV",{class:!0});var O=d(D);P=u(O,"P",{"data-svelte-h":!0}),ve(P)!=="svelte-5bk49r"&&(P.textContent=B),te=$(O),j=u(O,"P",{class:!0});var W=d(j);G=y(W,M),W.forEach(o),O.forEach(o),Y=$(L),U=u(L,"DIV",{class:!0});var z=d(U);V=u(z,"P",{"data-svelte-h":!0}),ve(V)!=="svelte-1otydcm"&&(V.textContent=q),se=$(z),N=u(z,"P",{class:!0});var ee=d(N);R=y(ee,Q),ee.forEach(o),z.forEach(o),L.forEach(o),this.h()},h(){ue(e.src,t=r[0].profile_picture||"https://via.placeholder.com/50")||i(e,"src",t),i(e,"alt","Avatar"),i(e,"class","avatar svelte-79ke6r"),i(a,"class","avatar-wrapper svelte-79ke6r"),i(v,"class","nombre svelte-79ke6r"),i(g,"class","cant-reviews svelte-79ke6r"),i(C,"class","data-block svelte-79ke6r"),i(j,"class","promedio-rating svelte-79ke6r"),i(D,"class","data-block svelte-79ke6r"),i(N,"class","likes-totales svelte-79ke6r"),i(U,"class","data-block svelte-79ke6r"),i(p,"class","data svelte-79ke6r")},m(_,E){K(_,a,E),l(a,e),K(_,s,E),K(_,v,E),l(v,f),K(_,b,E),K(_,p,E),l(p,C),l(C,w),l(C,h),l(C,g),l(g,S),l(p,x),l(p,D),l(D,P),l(D,te),l(D,j),l(j,G),l(p,Y),l(p,U),l(U,V),l(U,se),l(U,N),l(N,R)},p(_,E){E&1&&!ue(e.src,t=_[0].profile_picture||"https://via.placeholder.com/50")&&i(e,"src",t),E&1&&n!==(n=_[0].name+"")&&J(f,n),E&2&&A!==(A=_[1].reviewCount+"")&&J(S,A),E&2&&M!==(M=_[1].averageRating+"")&&J(G,M),E&2&&Q!==(Q=_[1].totalLikes+"")&&J(R,Q)},d(_){_&&(o(a),o(s),o(v),o(b),o(p))}}}function et(r){let a,e=r[0]&&r[1]&&Ge(r);return{c(){a=c("section"),e&&e.c(),this.h()},l(t){a=u(t,"SECTION",{class:!0});var s=d(a);e&&e.l(s),s.forEach(o),this.h()},h(){i(a,"class","svelte-79ke6r")},m(t,s){K(t,a,s),e&&e.m(a,null)},p(t,[s]){t[0]&&t[1]?e?e.p(t,s):(e=Ge(t),e.c(),e.m(a,null)):e&&(e.d(1),e=null)},i:pe,o:pe,d(t){t&&o(a),e&&e.d()}}}function tt(r,a,e){let{id:t}=a,s=null,v=null;return ze(async()=>{try{e(0,s=await Ke(t)),s?e(1,v=await Qe(s.id)):console.error("User not found")}catch(n){console.error("Error fetching user data:",n)}}),r.$$set=n=>{"id"in n&&e(2,t=n.id)},[s,v,t]}class st extends Se{constructor(a){super(),De(this,a,tt,et,Ae,{id:2})}}function qe(r,a,e){const t=r.slice();return t[4]=a[e],t}function We(r){var Pe,Ve;let a,e,t,s,v,n,f,b,p,C=r[4].ratingScore+"",w,T,h,g,A=new Date(r[4].fecha).toLocaleDateString("es-ES")+"",S,x,D,P,B,te,j,M,G=r[4].likes+"",Y,U,V,q,se='<img src="https://via.placeholder.com/50" alt="More Review" class="svelte-vums"/>',N,Q,R,_,E,Z=(((Pe=r[2][r[4].albumId])==null?void 0:Pe.name)||"Unknown Artist")+"",L,X,ae,O,W,z=(((Ve=r[1][r[4].albumId])==null?void 0:Ve.title)||"Unknown Album")+"",ee,fe,ge,le,ie=(r[4].content.length>_e?r[4].content.slice(0,_e)+"...":r[4].content)+"",de,be;return{c(){a=c("div"),e=c("div"),t=c("a"),s=c("img"),f=k(),b=c("div"),p=c("p"),w=F(C),h=k(),g=c("p"),S=F(A),x=k(),D=c("div"),P=c("div"),B=c("img"),j=k(),M=c("p"),Y=F(G),U=k(),V=c("a"),q=c("button"),q.innerHTML=se,Q=k(),R=c("div"),_=c("h3"),E=c("a"),L=F(Z),ae=k(),O=c("h3"),W=c("a"),ee=F(z),ge=k(),le=c("p"),de=F(ie),be=k(),this.h()},l(m){a=u(m,"DIV",{class:!0});var I=d(a);e=u(I,"DIV",{class:!0});var H=d(e);t=u(H,"A",{href:!0});var ne=d(t);s=u(ne,"IMG",{src:!0,alt:!0,class:!0}),ne.forEach(o),f=$(H),b=u(H,"DIV",{class:!0});var oe=d(b);p=u(oe,"P",{class:!0});var ce=d(p);w=y(ce,C),ce.forEach(o),oe.forEach(o),h=$(H),g=u(H,"P",{class:!0});var Re=d(g);S=y(Re,A),Re.forEach(o),x=$(H),D=u(H,"DIV",{class:!0});var he=d(D);P=u(he,"DIV",{class:!0});var me=d(P);B=u(me,"IMG",{src:!0,alt:!0,class:!0}),j=$(me),M=u(me,"P",{class:!0});var Te=d(M);Y=y(Te,G),Te.forEach(o),me.forEach(o),U=$(he),V=u(he,"A",{class:!0,href:!0});var Me=d(V);q=u(Me,"BUTTON",{class:!0,"data-svelte-h":!0}),ve(q)!=="svelte-106dnde"&&(q.innerHTML=se),Me.forEach(o),he.forEach(o),H.forEach(o),Q=$(I),R=u(I,"DIV",{class:!0});var re=d(R);_=u(re,"H3",{class:!0});var Ue=d(_);E=u(Ue,"A",{href:!0});var Ne=d(E);L=y(Ne,Z),Ne.forEach(o),Ue.forEach(o),ae=$(re),O=u(re,"H3",{class:!0});var Le=d(O);W=u(Le,"A",{href:!0});var Oe=d(W);ee=y(Oe,z),Oe.forEach(o),Le.forEach(o),ge=$(re),le=u(re,"P",{class:!0});var He=d(le);de=y(He,ie),He.forEach(o),re.forEach(o),be=$(I),I.forEach(o),this.h()},h(){var m,I;ue(s.src,v=((m=r[1][r[4].albumId])==null?void 0:m.cover)||"https://via.placeholder.com/150")||i(s,"src",v),i(s,"alt","Album Cover"),i(s,"class","portada hover-image svelte-vums"),i(t,"href",n=`/album/${r[4].albumId}`),i(p,"class",T="rating "+je(r[4].ratingScore)+" svelte-vums"),i(b,"class","rating-wrapper svelte-vums"),i(g,"class","fecha svelte-vums"),ue(B.src,te="https://via.placeholder.com/50")||i(B,"src",te),i(B,"alt","heart"),i(B,"class","heart svelte-vums"),i(M,"class","likes-no svelte-vums"),i(P,"class","likes svelte-vums"),i(q,"class","svelte-vums"),i(V,"class","more_review svelte-vums"),i(V,"href",N=`/review/${r[4].id}`),i(D,"class","buttons_review svelte-vums"),i(e,"class","info svelte-vums"),i(E,"href",X=`/artista/${(I=r[2][r[4].albumId])==null?void 0:I.id}`),i(_,"class","artista"),i(W,"href",fe=`/album/${r[4].albumId}`),i(O,"class","album"),i(le,"class","review-texto svelte-vums"),i(R,"class","ti-tex svelte-vums"),i(a,"class","review svelte-vums")},m(m,I){K(m,a,I),l(a,e),l(e,t),l(t,s),l(e,f),l(e,b),l(b,p),l(p,w),l(e,h),l(e,g),l(g,S),l(e,x),l(e,D),l(D,P),l(P,B),l(P,j),l(P,M),l(M,Y),l(D,U),l(D,V),l(V,q),l(a,Q),l(a,R),l(R,_),l(_,E),l(E,L),l(R,ae),l(R,O),l(O,W),l(W,ee),l(R,ge),l(R,le),l(le,de),l(a,be)},p(m,I){var H,ne,oe,ce;I&3&&!ue(s.src,v=((H=m[1][m[4].albumId])==null?void 0:H.cover)||"https://via.placeholder.com/150")&&i(s,"src",v),I&1&&n!==(n=`/album/${m[4].albumId}`)&&i(t,"href",n),I&1&&C!==(C=m[4].ratingScore+"")&&J(w,C),I&1&&T!==(T="rating "+je(m[4].ratingScore)+" svelte-vums")&&i(p,"class",T),I&1&&A!==(A=new Date(m[4].fecha).toLocaleDateString("es-ES")+"")&&J(S,A),I&1&&G!==(G=m[4].likes+"")&&J(Y,G),I&1&&N!==(N=`/review/${m[4].id}`)&&i(V,"href",N),I&5&&Z!==(Z=(((ne=m[2][m[4].albumId])==null?void 0:ne.name)||"Unknown Artist")+"")&&J(L,Z),I&5&&X!==(X=`/artista/${(oe=m[2][m[4].albumId])==null?void 0:oe.id}`)&&i(E,"href",X),I&3&&z!==(z=(((ce=m[1][m[4].albumId])==null?void 0:ce.title)||"Unknown Album")+"")&&J(ee,z),I&1&&fe!==(fe=`/album/${m[4].albumId}`)&&i(W,"href",fe),I&1&&ie!==(ie=(m[4].content.length>_e?m[4].content.slice(0,_e)+"...":m[4].content)+"")&&J(de,ie)},d(m){m&&o(a)}}}function at(r){let a,e=Be(r[0]),t=[];for(let s=0;s<e.length;s+=1)t[s]=We(qe(r,e,s));return{c(){a=c("section");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){a=u(s,"SECTION",{class:!0});var v=d(a);for(let n=0;n<t.length;n+=1)t[n].l(v);v.forEach(o),this.h()},h(){i(a,"class","svelte-vums")},m(s,v){K(s,a,v);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(a,null)},p(s,[v]){if(v&7){e=Be(s[0]);let n;for(n=0;n<e.length;n+=1){const f=qe(s,e,n);t[n]?t[n].p(f,v):(t[n]=We(f),t[n].c(),t[n].m(a,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},i:pe,o:pe,d(s){s&&o(a),ye(t,s)}}}function lt(r,a,e){let{id:t}=a,s=[],v={},n={};return ze(async()=>{try{e(0,s=(await Xe()).filter(f=>f.userId===t));for(const f of s)if(!v[f.albumId]){const b=await Ye(f.albumId);if(b){e(1,v[f.albumId]=b,v);const p=await Ze(b.artist);p&&e(2,n[f.albumId]=p,n)}}}catch(f){console.error("Failed to fetch user reviews:",f)}}),r.$$set=f=>{"id"in f&&e(3,t=f.id)},[s,v,n,t]}class rt extends Se{constructor(a){super(),De(this,a,lt,at,Ae,{id:3})}}function it(r){let a,e,t,s,v,n,f,b,p="Reviews",C,w,T;return a=new Je({}),v=new st({props:{id:r[0].id}}),w=new rt({props:{id:r[0].id}}),{c(){Ie(a.$$.fragment),e=k(),t=c("main"),s=c("section"),Ie(v.$$.fragment),n=k(),f=c("section"),b=c("h2"),b.textContent=p,C=k(),Ie(w.$$.fragment),this.h()},l(h){Ee(a.$$.fragment,h),e=$(h),t=u(h,"MAIN",{});var g=d(t);s=u(g,"SECTION",{class:!0});var A=d(s);Ee(v.$$.fragment,A),A.forEach(o),n=$(g),f=u(g,"SECTION",{class:!0});var S=d(f);b=u(S,"H2",{class:!0,"data-svelte-h":!0}),ve(b)!=="svelte-1s1oglv"&&(b.textContent=p),C=$(S),Ee(w.$$.fragment,S),S.forEach(o),g.forEach(o),this.h()},h(){i(s,"class","section-body"),i(b,"class","section-title titulo-rev svelte-5tgb50"),i(f,"class","section-body")},m(h,g){we(a,h,g),K(h,e,g),K(h,t,g),l(t,s),we(v,s,null),l(t,n),l(t,f),l(f,b),l(f,C),we(w,f,null),T=!0},p(h,[g]){const A={};g&1&&(A.id=h[0].id),v.$set(A);const S={};g&1&&(S.id=h[0].id),w.$set(S)},i(h){T||(ke(a.$$.fragment,h),ke(v.$$.fragment,h),ke(w.$$.fragment,h),T=!0)},o(h){$e(a.$$.fragment,h),$e(v.$$.fragment,h),$e(w.$$.fragment,h),T=!1},d(h){h&&(o(e),o(t)),Ce(a,h),Ce(v),Ce(w)}}}function nt(r,a,e){let{data:t}=a;return r.$$set=s=>{"data"in s&&e(0,t=s.data)},[t]}class _t extends Se{constructor(a){super(),De(this,a,nt,it,Ae,{data:0})}}export{_t as component,mt as universal};
