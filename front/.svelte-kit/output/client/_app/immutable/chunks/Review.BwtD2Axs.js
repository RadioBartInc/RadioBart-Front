import{s as Ke,n as Oe,o as Qe,d as ve}from"./scheduler.Cz3TSd7V.js";import{S as We,i as Xe,e as f,c as n,d as c,g as u,o as e,j as $,s as I,b as V,x as qe,h as B,f as P,y as ze,k as a,z as Ye,l as U,A as Ze}from"./index.DKOtY3uX.js";import{a as ye,b as $e,c as xe,d as es,u as ss}from"./APIAdapter.CWbTadu6.js";import{g as Fe}from"./misc.B4lJbiPP.js";function Ge(r){let t,s,i,v,h,d,g,b,j=r[4].name+"",w,M,J,D,m,K=r[3].title+"",x,ee,me,H,T,Q=r[1].ratingScore+"",se,te,_e,N,W=r[1].fecha.toLocaleDateString("es-ES")+"",ae,le,S,O,k,C,A,re,ie,de,X,L,Y=r[2].name+"",oe,ue,pe,E,R,p,Z,fe,ge,q,ne,we,Ee,z,y=r[1].content+"",ce,be,je,_=r[0]&&Je(r);return{c(){t=f("div"),s=f("a"),i=f("img"),d=I(),g=f("h3"),b=f("a"),w=V(j),J=I(),D=f("h3"),m=f("a"),x=V(K),me=I(),H=f("div"),T=f("p"),se=V(Q),_e=I(),N=f("p"),ae=V(W),le=I(),S=f("div"),O=f("div"),k=f("div"),C=f("a"),A=f("img"),de=I(),X=f("p"),L=f("a"),oe=V(Y),pe=I(),E=f("div"),R=f("button"),p=qe("svg"),Z=qe("path"),ge=I(),q=f("p"),ne=V(r[5]),we=I(),_&&_.c(),Ee=I(),z=f("p"),ce=V(y),this.h()},l(o){t=n(o,"DIV",{class:!0});var l=c(t);s=n(l,"A",{href:!0});var ke=c(s);i=n(ke,"IMG",{src:!0,alt:!0,class:!0}),ke.forEach(u),d=B(l),g=n(l,"H3",{class:!0});var Ie=c(g);b=n(Ie,"A",{href:!0});var Be=c(b);w=P(Be,j),Be.forEach(u),Ie.forEach(u),J=B(l),D=n(l,"H3",{class:!0});var Se=c(D);m=n(Se,"A",{href:!0});var Ae=c(m);x=P(Ae,K),Ae.forEach(u),Se.forEach(u),me=B(l),H=n(l,"DIV",{class:!0});var Me=c(H);T=n(Me,"P",{class:!0});var De=c(T);se=P(De,Q),De.forEach(u),Me.forEach(u),_e=B(l),N=n(l,"P",{class:!0});var Te=c(N);ae=P(Te,W),Te.forEach(u),l.forEach(u),le=B(o),S=n(o,"DIV",{class:!0});var he=c(S);O=n(he,"DIV",{class:!0});var Ce=c(O);k=n(Ce,"DIV",{class:!0});var F=c(k);C=n(F,"A",{href:!0});var Le=c(C);A=n(Le,"IMG",{src:!0,alt:!0,class:!0}),Le.forEach(u),de=B(F),X=n(F,"P",{});var Re=c(X);L=n(Re,"A",{href:!0});var Ve=c(L);oe=P(Ve,Y),Ve.forEach(u),Re.forEach(u),pe=B(F),E=n(F,"DIV",{class:!0});var G=c(E);R=n(G,"BUTTON",{class:!0});var Pe=c(R);p=ze(Pe,"svg",{class:!0,height:!0,fill:!0,viewBox:!0,width:!0,xmlns:!0});var Ue=c(p);Z=ze(Ue,"path",{d:!0}),c(Z).forEach(u),Ue.forEach(u),Pe.forEach(u),ge=B(G),q=n(G,"P",{class:!0});var He=c(q);ne=P(He,r[5]),He.forEach(u),we=B(G),_&&_.l(G),G.forEach(u),F.forEach(u),Ce.forEach(u),Ee=B(he),z=n(he,"P",{class:!0});var Ne=c(z);ce=P(Ne,y),Ne.forEach(u),he.forEach(u),this.h()},h(){ve(i.src,v=r[3].cover)||e(i,"src",v),e(i,"alt","Album Cover"),e(i,"class","portada hover-image svelte-jus0m5"),e(s,"href",h=`/album/${r[3].id}`),e(b,"href",M=`/artista/${r[4].id}`),e(g,"class","artista svelte-jus0m5"),e(m,"href",ee=`/album/${r[3].id}`),e(D,"class","album svelte-jus0m5"),e(T,"class",te="rating "+Fe(r[1].ratingScore)+" svelte-jus0m5"),e(H,"class","rating-wrapper svelte-jus0m5"),e(N,"class","fecha svelte-jus0m5"),e(t,"class","info svelte-jus0m5"),ve(A.src,re=r[2].profile_picture||"https://via.placeholder.com/50")||e(A,"src",re),e(A,"alt","User Avatar"),e(A,"class","avatar svelte-jus0m5"),e(C,"href",ie=`/usuario/${r[2].id}`),e(L,"href",ue=`/usuario/${r[2].id}`),e(Z,"d","m248.367188 448.496094c2.359374 1.394531 4.996093 2.082031 7.632812 2.082031s5.273438-.6875 7.632812-2.082031c10.398438-6.152344 255.613282-152.242188 248.203126-309.316406-3.632813-77.175782-63.378907-138.078126-134.769532-138.648438-61.941406-1.390625-100.558594 42.121094-121.066406 80.53125-20.40625-38.191406-59.363281-80.53125-120.042969-80.53125-.351562 0-.6875 0-1.023437 0-71.390625.574219-131.136719 61.472656-134.769532 138.648438-7.410156 157.074218 237.800782 303.164062 248.203126 309.316406zm0 0"),e(p,"class","heart svelte-jus0m5"),e(p,"height","20px"),e(p,"fill",fe=r[6]?"#ff6666":"#222"),e(p,"viewBox","0 -30 511.99938 511"),e(p,"width","20px"),e(p,"xmlns","http://www.w3.org/2000/svg"),e(R,"class","like-button svelte-jus0m5"),e(q,"class","likes-no svelte-jus0m5"),e(E,"class","likes svelte-jus0m5"),e(k,"class","info_usuario svelte-jus0m5"),e(O,"class","usuario"),e(z,"class","review-texto svelte-jus0m5"),e(S,"class","review svelte-jus0m5")},m(o,l){$(o,t,l),a(t,s),a(s,i),a(t,d),a(t,g),a(g,b),a(b,w),a(t,J),a(t,D),a(D,m),a(m,x),a(t,me),a(t,H),a(H,T),a(T,se),a(t,_e),a(t,N),a(N,ae),$(o,le,l),$(o,S,l),a(S,O),a(O,k),a(k,C),a(C,A),a(k,de),a(k,X),a(X,L),a(L,oe),a(k,pe),a(k,E),a(E,R),a(R,p),a(p,Z),a(E,ge),a(E,q),a(q,ne),a(E,we),_&&_.m(E,null),a(S,Ee),a(S,z),a(z,ce),be||(je=Ye(R,"click",r[7]),be=!0)},p(o,l){l&8&&!ve(i.src,v=o[3].cover)&&e(i,"src",v),l&8&&h!==(h=`/album/${o[3].id}`)&&e(s,"href",h),l&16&&j!==(j=o[4].name+"")&&U(w,j),l&16&&M!==(M=`/artista/${o[4].id}`)&&e(b,"href",M),l&8&&K!==(K=o[3].title+"")&&U(x,K),l&8&&ee!==(ee=`/album/${o[3].id}`)&&e(m,"href",ee),l&2&&Q!==(Q=o[1].ratingScore+"")&&U(se,Q),l&2&&te!==(te="rating "+Fe(o[1].ratingScore)+" svelte-jus0m5")&&e(T,"class",te),l&2&&W!==(W=o[1].fecha.toLocaleDateString("es-ES")+"")&&U(ae,W),l&4&&!ve(A.src,re=o[2].profile_picture||"https://via.placeholder.com/50")&&e(A,"src",re),l&4&&ie!==(ie=`/usuario/${o[2].id}`)&&e(C,"href",ie),l&4&&Y!==(Y=o[2].name+"")&&U(oe,Y),l&4&&ue!==(ue=`/usuario/${o[2].id}`)&&e(L,"href",ue),l&64&&fe!==(fe=o[6]?"#ff6666":"#222")&&e(p,"fill",fe),l&32&&U(ne,o[5]),o[0]?_?_.p(o,l):(_=Je(o),_.c(),_.m(E,null)):_&&(_.d(1),_=null),l&2&&y!==(y=o[1].content+"")&&U(ce,y)},d(o){o&&(u(t),u(le),u(S)),_&&_.d(),be=!1,je()}}}function Je(r){let t,s,i='<img src="https://via.placeholder.com/50" alt="More Review" class="svelte-jus0m5"/>',v;return{c(){t=f("a"),s=f("button"),s.innerHTML=i,this.h()},l(h){t=n(h,"A",{class:!0,href:!0});var d=c(t);s=n(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Ze(s)!=="svelte-3frthu"&&(s.innerHTML=i),d.forEach(u),this.h()},h(){e(s,"class","svelte-jus0m5"),e(t,"class","more_review svelte-jus0m5"),e(t,"href",v=`/review/${r[1].id}`)},m(h,d){$(h,t,d),a(t,s)},p(h,d){d&2&&v!==(v=`/review/${h[1].id}`)&&e(t,"href",v)},d(h){h&&u(t)}}}function ts(r){let t,s=r[1]&&r[3]&&r[2]&&r[4]&&Ge(r);return{c(){t=f("section"),s&&s.c(),this.h()},l(i){t=n(i,"SECTION",{class:!0});var v=c(t);s&&s.l(v),v.forEach(u),this.h()},h(){e(t,"class","svelte-jus0m5")},m(i,v){$(i,t,v),s&&s.m(t,null)},p(i,[v]){i[1]&&i[3]&&i[2]&&i[4]?s?s.p(i,v):(s=Ge(i),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},i:Oe,o:Oe,d(i){i&&u(t),s&&s.d()}}}function as(r,t,s){let{id:i}=t,{showMoreButton:v=!1}=t,h=null,d=null,g=null,b=null,j=0,w=!1,M="";async function J(){try{M=localStorage.getItem("token"),s(1,h=await ye(i)),h&&(s(2,d=await $e(h.userId)),s(3,g=await xe(h.albumId)),g&&s(4,b=await es(g.artist)),s(5,j=h.likes),s(6,w=!1))}catch(m){console.error("Failed to fetch review data:",m)}}Qe(J);async function D(){if(h&&d&&M)try{await ss(h.id,M,j+(w?-1:1),d.id)&&(s(5,j+=w?-1:1),s(6,w=!w))}catch(m){console.error("Failed to update like status:",m)}}return r.$$set=m=>{"id"in m&&s(8,i=m.id),"showMoreButton"in m&&s(0,v=m.showMoreButton)},[v,h,d,g,b,j,w,D,i]}class us extends We{constructor(t){super(),Xe(this,t,as,ts,Ke,{id:8,showMoreButton:0})}}export{us as R};
